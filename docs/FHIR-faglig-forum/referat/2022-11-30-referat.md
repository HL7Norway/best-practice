# M칮te 15 i FHIR fagforum

* Dato: 2022-11-30
* Klokkeslett: 1300-1500
* 74 personer innom m칮tet

FHIR fagforum (FFF) er et 친pent forum om bruk og implementering av HL7 FHIR i Norge. FFF er 친pent for alle.

## Erfaringer fra prosjekter

1. Velkommen og presentasjonsrunde, Thomas T Rosenlund, Direktoratet for e-helse (5 min)
2. Informasjon fra HL7 Norge, 칒yvind Aassve, Sykehuspartner (5 min)
3. Pasientens pr칮vesvar (NILAR), Ivar Yrke, NHN (30 min)
4. Digital behandling og egenbehandlingsplan, Vidar Methi NHN, Norsk Helsenett/Helsedirektoratet (30 min)
5. Klinikere "on FHIR"! - Hvordan et API kan skape glede og trygghet i helsetjenesten - SAFEST. Kristine Aasen, Statens legemiddelverk og Bernd Moeske, Sykehuspartner. (30-40 min)
6. Eventuelt og diskusjon

## Presentasjoner

* [FHIR fagforum intro nr 15, Erfaringer fra prosjekter](../presentasjon/2022-11-30-FHIR-fagforum-15.pdf)
* [Pasientens pr칮vesvar](../presentasjon/2022-11-30-Nilar.pptx)
* [Digital behandlings- og egenbehandlingsplan](../presentasjon/2022-11-30-DBEP.pdf)
* [Klinikere on FHIR](../presentasjon/2022-11-30-SAFEST-SLV-HF.pdf)

## HL7 Norge - 칒yvind AAssve, Sykehuspartner

* Innspill: codeSystem mangler i SAFEST arbeidet (listen over prosjekter)

## Pasientens pr칮vesvar, Ivar Yrke NHN

* KITH meldinger innkommende som skal tilgjengeliggj칮res som HL7 FHIR (R4)
* Samle inn og tilgjengeliggj칮re informasjon
* Skal kunne s칮ke i labsvar p친 tvers av de som sender ut lab og behandler
  * Meldingene lagres i labsvar database (MongoDB)
  * PPS tjenesten oppst친r on-the-fly i l칮sningen, all prosessering p친 vei ut (etter sp칮rringen)
  * Startet med 친 lagre data i Vonk server men gikk bort fra det (prosessering p친 vei inn)
* 1:1 mapping mellom KITH XML og FHIR
  * Datoer er ikke like i FHIR og KITH XML
  * Koder og kodeverk h친ndteres forskjellig i ulike systemer (labsystemer)
    * koder ligger forskjellig i KITH XML avhengig av hvilket system som har produsert
  * Ulike strukturer i KITH XML men er forutsigbare
  * Ulike tolkninger og implementasjoner av XML standarden s친 det er ikke alltid samme semantiske innhold kommer p친 samme sted i KITH XML
    * vanskelig 친 h친ndtere i prosjektet siden orden i Labmeldingene ikke er m친let for prosjektet
* Enveis, mappingen fra XML til FHIR g친r aldri motsatt vei 
* Kan ikke levere data p친 FHIR format, det kan v칝re aktuelt i fremtiden
  * 칮nsker ikke 친 videref칮re gjeld fra KITH XML som er med av historiske 친rsaker
  * FHIR profil for innlevering m친 v칝re nyproduksjon
* Profilering
  * Draft mode av Implementasjonsguide
  * FHIR Shorthand profilering
    * Diskuterer med HL7 og TSK
* Teknologivalg - ingen FHIR mapping p친 vei inn
  * Innkommende data lagres som de er (KITH XML) nesten med to unntak
    * Delvis pseudonymisering av data i database (navn telefon adresse og personnummer tas bort)
    * Legger p친 id som blir FHIR id
  * MongoDB - lagring
  * Mapper til FHIR p친 vei ut ved foresp칮rsel
    * Fhirely.SDK mapper
* Begrunnelse
  * D친rlig ytelse p친 mottak av data ved
  * ingen binding av FHIr versjon i persisteringen
  * utdata kan levers p친 hvilken som helst versjon, ny mapping, ny utdata
  * Ulemper
    * Noe tyngre prosesering p친 vei ut
    * vanskelig 친 optimalisere uthenting fra database siden noen av kriteriene ligger godt innkapslet i dataene
    * Henter alle data om person og filtrerer etterp친 basret p친 s칮ket
* Drift i en m친ned
  * pr칮ves ut med Furst og ti leger
  * kun test og ikke behandling
  * oppslag via kjernejournal for kliniker
  * Over 1/2 million meldinger mottatt
  * Innsyn i egne data via helsenorge for innbygger
    * Pasientens pr칮vesvar p친 helsenorge og se pr칮vene
    * Mest aktivitet fra innbygger (20 000 oppslag)

### Sp칮rsm친l

* Prosessering p친 vei ut, hva betyr det for ytelsen?
  * Ikke sammenlignet - hadde ikek vesentlige data p친 Vonk
  * Veldig avhengig av mengden data, mye data gir d친rlig ytelse
    * mange sekunder 6-7 sekunder for 친 f친 ut data
  * Tallene ca 800ms 친 f친 ut svar og kan ogs친 optimaliseres ytterligere

## Digitale behandlings og egenbehandlingsplaner

* Helsedirektoratet hovedprosjekt, NHN l칮sningsutvikler, Helse-Nord har utpr칮ving
* Diagnoser - M친l - Behandlingstiltak
* Samhandlingen om pasienten blant behandlere og involvere pasienten
* Sentral lagring i kjernejournal med 친pne API
  * idag er utpr칮vingen gjennom portall칮sning i kjernejournal
  * 칮nsker 친 fase ut portall칮sningen etterhvert som systemene implementerer integrasjon mot API
* Behandlergrensesnitt - eksemplifiserer API funksjonaliteten
* Startet begrenset utpr칮ving med kjernejournal og helsenorge
  * Videreutvikling il칮pet av utpr칮vingen
  * Dokumentere og evaluere etter utpr칮vingen
* Teknisk l칮sning basert p친 HAPI FHIR
  * FHIR fasade
  * SQL server til 친 lagre struktur for FHIR ressur, FHIR ressurser lagres som JSON "document"
  * CarePlan brukes som behandlingsplanen
  * Condition - beskriver diagnose/problemstilling
  * Goal - brukes for 친 skrive behandlingsm친l
  * ServiceRequest - tiltak som skal gjennomf칮res av behandler eller pasient
* Autentisering - HelseID for kliniker og helsenorge for innbygger
  * Sperring bruker personvernkomponenten i helsenorge
* Teknisk dokumentasjon p친 NHN utviklerportal
  * NHN utviklerportal under kjernejournal
* Identifikatorer
  * id vs identifier
* Registering av endringer av planen ligger n친 som metadata/extension
  * Provenance, contained eller extension - 
  * provenance er noe kompleks og bruk av referanser er utfordrende

### Sp칮rsm친l

* Valg av lagringsplattform
  * Kjernejournal har en vanlig relasjonsdatabase, vanskelig 친 lagre FHIR struktur i en relasjonsdatabase
  * Passet best med SQL database for koblingen til kjernejournal
  * SQL enkel 친 legge i kubernetes
* Litt erfaringer knyttet til ulike lagringsteknologi
* CarePlan - har vel en struktur for tiltaket? Hva med kobling til Questionnaire
  * ServiceRequest er et minstevalg, kan tenke seg 친 utvide mer etterhvert
  * FHIR har rammeverk for mer spesifikke ressurser for 친 detaljere tiltak
* Lagring av dokumentene som JSON i databasen hva med sp칮rring?
  * F친r spurt i elementer inne i strukturen
* Modellene som vises her - finnes det noe verkt칮y?
  * Tegnet selv i Gliffy og andre verkt칮y

* Tidligere har det v칝rt juridiske problemer med 친 lagre en liste over pasientens diagnoser sentralt i kjernejournal. Er det l칮st opp i, eller er det ok fordi det bare er et utvalg av diagnoser (om det er det)?
Og diagnoser, er det angitt med icd-10, og /eller ICPC2? (snakker gjerne om dette etter m칮tet-mail)
  * ICPC-2 游땕
Det er lov 친 lagre behandlingsplan i kjernejournal (med diagnoser) ref. kjernejournalforskriften, men bare hvis pasient samtykker. Dvs. m친 pasient gi samtykke til behandler f칮r hen kan opprette plan (dette g친r som egen request, som vi lagrer det ned). Samtykke kan ogs친 trekkes tilbake, og da m친 vi slette planen.
Akkurat hva som er den fulle juridiske problemstillingen her t칮r jeg ikke helt 친 svare p친 i farten, men det er riktig som du sier at dette ikke er en autorativ diagnoseliste - Selv om den kan gi en nyttig "problemoversikt" er det ikke gitt at behandlerne knytter pasientens behandlingsplan til alle pasientens diagnoser.

* Tar i bruk CarePlan og andre ressurser, planlegger dere 친 arbeide med basis/domeneressurser, for gjenbruk for eksempel?
  * Koordinering p친 tvers og eventuelle andre m친ter 친 dokumentere FHIr bruken p친 (SIMPLIFIER eller IG publisher)
  * Ingen utstrakte tilpasninger av CarePlan (stort sett vanilla CarePlan)
    * De bruker bare en extension og har noen kodeverksbindinger (diagnose)

* AcitivityDefinition - istenfor ServiceRequest, ja det er vurdert.

## Kliniker on FHIR, FHI Kristine Aasen og Berndt Moeske

* Legemiddelverket en del av et internasjonalt samarbeid om trygge legemidler
* Internasjonale standarder er viktig: IDMP
* 1:1 forhold mellom iso/IDMP og HL7 FHIR
* Bruk av ISO/IDMP er hjemlet i EU
* FHIR spesifikasjonen er direkte tilpasset til medisininformasjon i europa (IDMP)
* MedicinalProduct er ikke klar f칮r R4B av HL7 FHIR
  * Microsoft FHIR underst칮tter ikke rekursive s칮k p.t.
* Virkestoffordinering
  * Mer presis forordning med virkestoff forordningen
* Virkestofforordningsgrupper i IDMP
  * Ulike produkter benyttes i forskjellige land
* PhPID - ingen FHIR profil for PhPID enn친 (Hash id)

### Sp칮rsm친l

* PhPID - n친r kommer det?
  * Uppsala har f친tt i oppdrag fra WHO 친 utgi PhPID, men det tar tid
  * Nyttig med kontakt internasjonalt
* FESTid kan ogs친 inneholdes i id'en pluss endel kodeverk fra internasjonalt? Er det de norske kodeverkene i FEST som brukes, hva med Volvenkodeverkene for dosering for eksempel?
  * 칒nskelig 친 bruke internasjonale SPOR kodeverk
  * Kan distribuere begge deler
  * Legemiddelform vil det bli en overgang - koden i FEST blir ikek samme som blir levert ut i SAFEST
* Visning av legemidler for utlendinger m친 dette p친 plass? EU Helsedataprosjektet
  * Vi har tenkt at PhPid blir viktig hjelp for forskrvning og utlevering p친 tvers av landegrenser
  * Kommer ann p친
## Eventuelt og diskusjon

* Neste m칮te 8 februar, Nordic on FHIR, meld dere p친 info@hl7.no
* Mange gode sp칮rsm친l

Til 칒yvind
칒yvind Aassve send meg gjerne litt mer info om den HL7 "kvernen" p친 peter.evans@nhn.no, s친 kan jeg legge det inn som en mulig aktivitet i prosjektavslutningen - avhengig av hvor vi st친r da og hva vi har l칝rt fra utpr칮vningen
